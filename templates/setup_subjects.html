{% extends "base.html" %}
{% block title %}Setup - Revision Royale{% endblock %}

{% block content %}
<div class="setup-container">
    <div class="login-card wide-card">
        <h1 class="card-title">Your Subjects</h1>
        <p class="card-subtitle">Select the subjects and exam boards you are studying.</p>
        {% if ErrorMessage %}
            <p style="color: #9b052c; font-weight: bold; font-size: 0.9rem; margin-bottom: 5px;">{{ ErrorMessage }}</p>
        {% endif %}
        <form action="/setup-subjects" method="POST" id="subject-form">
            <div id="rows-container">
                <div class="subject-row">
                    <select name="subject[]" class="input-field select-field" required>
                        <option value="" disabled selected>Select Subject</option>
                        {% for sub in Subjects %}
                        <option value="{{ sub }}">{{ sub }}</option>
                        {% endfor %}
                    </select>

                    <select name="exam-board[]" class="input-field select-field" required>
                        <option value="" disabled selected>Exam Board</option>
                        {% for board in ExamBoards %}
                        <option value="{{ board }}">{{ board }}</option>
                        {% endfor %}
                    </select>
                    
                    <button type="button" class="remove-btn" style="visibility: hidden;">✕</button>
                </div>
            </div>

            <div class="controls">
                <button type="button" class="btn outline-btn small-btn" onclick="addSubjectRow()">+ Add Another</button>
            </div>

            <div class="btn-stack" style="margin-top: 30px;">
                <button type="submit" class="btn">Save & Continue</button>
            </div>

        </form>
    </div>
</div>

<div id="row-template" style="display: none;">
    <div class="subject-row fade-in">
        <select name="subject[]" class="input-field select-field" required>
            <option value="" disabled selected>Select Subject</option>
            {% for Subject in Subjects %}
                <option value="{{ Subject }}">{{ Subject }}</option>
            {% endfor %}
        </select>

        <select name="exam-board[]" class="input-field select-field" required>
            <option value="" disabled selected>Exam Board</option>
            {% for ExamBoard in ExamBoards %}
                <option value="{{ ExamBoard }}">{{ ExamBoard }}</option>
            {% endfor %}
        </select>

        <button type="button" class="remove-btn" onclick="removeRow(this)">✕</button>
    </div>
</div>
{% endblock %}